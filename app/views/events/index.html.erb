

<div class="container mt-5 margin-bottom-80">
  <div class='d-flex justify-content-around align-items-center mb-5'>

    <%= link_to events_path(date: @date - 1.month) do  %>
      <h5> <small> <i class="fa-solid fa-arrow-left-long"></i> </small> <%= (@date - 1.month).strftime("%b") %></h5>
    <% end %>
    <h3><strong><%= @date.strftime("%^B") %></strong></h3>
    <%= link_to events_path(date: @date + 1.month) do %>
      <h5><%= (@date + 1.month).strftime("%b") %> <small> <i class="fa-solid fa-arrow-right"></i> </small></h5>
    <% end  %>

  </div>

  <div class='d-flex justify-content-around mb-5' data-controller="category" >
    <div data-action="click->category#choose_sport">
      <%= link_to events_path(category: (params[:category] == "Sport" ? nil : "Sport")) do %>
        <i class="fa-solid <%= 'fa-2x' if params[:category] == "Sport" %> fa-volleyball sport-color" data-category-target="sport"></i>
      <% end %>
    </div>
    <div data-action="click->category#choose_culture">
      <%= link_to events_path(category: (params[:category] == "Culture" ? nil : "Culture")) do %>
        <i class="fa-solid <%= 'fa-2x' if params[:category] == "Culture" %> fa-book culture-color" data-category-target="culture"></i>
      <% end %>
    </div>
    <div data-action="click->category#choose_voyage">
      <%= link_to events_path(category: (params[:category] == "Voyage" ? nil : "Voyage")) do %>
        <i class="fa-solid <%= 'fa-2x' if params[:category] == "Voyage" %> fa-plane-departure voyage-color" data-category-target="voyage"></i>
      <% end %>
    </div>
    <div data-action="click->category#choose_autres" class='autres-color'>
      <%= link_to events_path(category: (params[:category] == "Autres" ? nil : "Autres")) do %>
        <i class="fa-solid <%= 'fa-2x' if params[:category] == "Autres" %> fa-star-of-life" data-category-target="autres"></i>
      <% end %>
    </div>
  </div>

  <% date = @events.first.starts_at.strftime("%d") %>
  <% @events.each do |event| %>
    <% if @date.strftime("%B") == event.starts_at.strftime("%B") %>
      <ul>
        <div class="">
          <div class=''><%= link_to event_path(event) do %>
              <div class="event-planning-container">
                <% if event.starts_at.strftime("%d") != date %>
                <% date = event.starts_at.strftime("%d") %>
                  <div class='event-day'>
                    <li><%= event.starts_at.strftime("%a") %> <%= event.starts_at.day %> </li>
                  </div>
                <% elsif event == @events.first %>
                  <div class='event-day'>
                    <li><%= event.starts_at.strftime("%a") %> <%= event.starts_at.day %>  </li>
                  </div>
                <% end %>
                <div></div>
                <div class='event-info-wrapper <%=event.category%>'>
                  <div class='event-info d-flex' >
                    <div class='overflow-info'><strong><%= event.title %></strong> <small> - <%= event.venue %></small></div>
                    <div class='see-event-info'><i class="fa-solid fa-eye"></i></div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </ul>
    <% end %>
  <% end %>
</div>
